<!DOCTYPE html>
<!--
 | Generated by Apache Maven Doxia Site Renderer 1.9.2 from src/site/asciidoc/reference/storage/introduction.adoc at 2024-03-03
 | Rendered using Apache Maven Fluido Skin 1.8
-->
<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="generator" content="Apache Maven Doxia Site Renderer 1.9.2" />
    <title>osgiliath-platform &#x2013; </title>
    <link rel="stylesheet" href="../../css/apache-maven-fluido-1.8.min.css" />
    <link rel="stylesheet" href="../../css/site.css" />
    <link rel="stylesheet" href="../../css/print.css" media="print" />
    <script src="../../js/apache-maven-fluido-1.8.min.js"></script>
  </head>
  <body class="topBarEnabled">
    <header id="topbar" class="navbar navbar-fixed-top ">
      <div class="navbar-inner">
        <div class="container-fluid">
        <a data-target=".nav-collapse" data-toggle="collapse" class="btn btn-navbar">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </a>
            <ul class="nav">
      <li class="dropdown">
        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Documentation <b class="caret"></b></a>
        <ul class="dropdown-menu">
            <li><a href="../../reference/toc.html" title="Reference Documentation">Reference Documentation</a></li>
            <li><a href="../../contributor/toc.html" title="Developer guide">Developer guide</a></li>
        </ul>
      </li>
      <li class="dropdown">
        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Project Documentation <b class="caret"></b></a>
        <ul class="dropdown-menu">
            <li class="dropdown-submenu">
<a href="../../project-info.html" title="Project Information">Project Information</a>
              <ul class="dropdown-menu">
                  <li><a href="../../integration.html" title="Continuous Integration">Continuous Integration</a></li>
                  <li><a href="../../dependency-info.html" title="Dependency Information">Dependency Information</a></li>
                  <li><a href="../../distribution-management.html" title="Distribution Management">Distribution Management</a></li>
                  <li><a href="../../index.html" title="About">About</a></li>
                  <li><a href="../../issue-tracking.html" title="Issue Tracking">Issue Tracking</a></li>
                  <li><a href="../../license.html" title="Project License">Project License</a></li>
                  <li><a href="../../mail-lists.html" title="Mailing Lists">Mailing Lists</a></li>
                  <li><a href="../../plugin-management.html" title="Plugin Management">Plugin Management</a></li>
                  <li><a href="../../plugins.html" title="Project Plugins">Project Plugins</a></li>
                  <li><a href="../../team-list.html" title="Project Team">Project Team</a></li>
                  <li><a href="../../source-repository.html" title="Source Repository">Source Repository</a></li>
                  <li><a href="../../project-summary.html" title="Project Summary">Project Summary</a></li>
              </ul>
            </li>
            <li class="dropdown-submenu">
<a href="../../project-reports.html" title="Project Reports">Project Reports</a>
              <ul class="dropdown-menu">
                  <li><a href="../../dependency-updates-report.html" title="Dependency Updates Report">Dependency Updates Report</a></li>
                  <li><a href="../../plugin-updates-report.html" title="Plugin Updates Report">Plugin Updates Report</a></li>
                  <li><a href="../../property-updates-report.html" title="Property Updates Report">Property Updates Report</a></li>
              </ul>
            </li>
        </ul>
      </li>
            </ul>
        </div>
      </div>
    </header>
    <div class="container-fluid">
      <header>
        <div id="banner">
          <div class="pull-left"><a href="https://github.com/OsgiliathEnterprise/platform" id="bannerLeft"><h2>Github repository</h2>
</a></div>
          <div class="pull-right"></div>
          <div class="clear"><hr/></div>
        </div>

        <div id="breadcrumbs">
          <ul class="breadcrumb">
        <li id="publishDate">Last Published: 2024-03-03<span class="divider">|</span>
</li>
          <li id="projectVersion">Version: 0.0.2-SNAPSHOT</li>
          </ul>
        </div>
      </header>
      <div class="row-fluid">
        <header id="leftColumn" class="span2">
          <nav class="well sidebar-nav">
  <ul class="nav nav-list">
   <li class="nav-header">Documentation</li>
    <li><a href="../../reference/toc.html" title="Reference Documentation"><span class="none"></span>Reference Documentation</a></li>
    <li><a href="../../contributor/toc.html" title="Developer guide"><span class="none"></span>Developer guide</a></li>
   <li class="nav-header">Project Documentation</li>
    <li><a href="../../project-info.html" title="Project Information"><span class="icon-chevron-right"></span>Project Information</a></li>
    <li><a href="../../project-reports.html" title="Project Reports"><span class="icon-chevron-right"></span>Project Reports</a></li>
  </ul>
          </nav>
          <div class="well sidebar-nav">
            <hr />
            <div id="poweredBy">
              <div class="clear"></div>
              <div class="clear"></div>
              <div class="clear"></div>
<a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy"><img class="builtBy" alt="Built by Maven" src="../../images/logos/maven-feather.png" /></a>
            </div>
          </div>
        </header>
        <main id="bodyColumn"  class="span10" >
<h1>Storage</h1>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>There are at least as many storage solution than different hypervisors :-).<br/></p>
</div>
<div class="paragraph">
<p>Storage can be on the cloud (Azure blob storage, ADLS, S3) or local and we hope to support it in the very near future, thanks to Terraform cloud infrastructure control.</p>
</div>
<div class="paragraph">
<p>When speaking about local installation or low level, physical disks are aggregated using the notion of physical volume groups.
These PVS are usually choosen depending on the capabilities of the drives: do they handle hot plug, are they redundant, efficient ?</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="logical_volumes">Logical volumes</h2>
<div class="sectionbody">
<div class="paragraph">
<p>These volume groups can then be split into several logical volume groups these LVMs are usually in place to seggregate the kind of data which is saved:<br/></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Is it business critical, like the photo of your 18 years old son when he was born.</p>
</li>
<li>
<p>Or is it to store data which you do not really care, like your more-than-a-year-old system logs.</p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="thinpools">Thinpools</h3>
<div class="paragraph">
<p>These logical volume groups can be auto extending, meaning that at first they only have the minimal size, then extends by themselves as long as you add data on them.</p>
</div>
<div class="paragraph">
<p>A thinpool is made of two logical volumes: a fixed one to store the pool metadata (main thinpool configuration) and an other one for the effective pool.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="nfs">NFS</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Network file systems are mounted harddisks through network.<br/>
These filesystem are protected by kerberos, particularly with the help of the ansible-volume role.</p>
</div>
<div class="paragraph">
<p>However sometimes, the kerberos tickets expires.</p>
</div>
<div class="paragraph">
<p>Here&#8217;s a recipe to renew all tickets on each hosts.
On the datastore host</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>sudo kdestroy
sudo kinit admin
sudo ipa-rmkeytab -p nfs/nfs.example.com -k /etc/krb5.keytab
sudo ipa-getkeytab -p nfs/nfs.example.com -k /etc/krb5.keytab
sudo ipa-rmkeytab -p host/nfs.example.com -k /etc/krb5.keytab
sudo ipa-getkeytab -p host/nfs.example.com -k /etc/krb5.keytab</code></pre>
</div>
</div>
<div class="paragraph">
<p>On the client host</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>sudo kdestroy
sudo kinit admin
sudo ipa-rmkeytab -p host/client.example.com -k /etc/krb5.keytab
sudo ipa-getkeytab -p host/client.example.com -k /etc/krb5.keytab</code></pre>
</div>
</div>
</div>
</div>
        </main>
      </div>
    </div>
    <hr/>
    <footer>
      <div class="container-fluid">
        <div class="row-fluid">
            <p>Copyright &#169;      2020&#x2013;2024<a href="not at the moment">Osgiliath (Charlie Mordant)</a>.
.</p>
        </div>
      </div>
    </footer>
  </body>
</html>