 Osgiliath Platform
 =========
| Repo                                                                                    | Lint status | Tests status | Galaxy url | Status                                                                          |
|-----------------------------------------------------------------------------------------|-------------|--------------|------------|---------------------------------------------------------------------------------|
| [Platform](https://github.com/OsgiliathEnterprise/platform)                             |![Publish documentation](https://github.com/OsgiliathEnterprise/platform/workflows/Publish%20documentation/badge.svg)| | | [![GA](https://img.shields.io/badge/GA-released-green)]()                       |
| [Containerization](https://github.com/OsgiliathEnterprise/ansible-containerization)     |![Molecule](https://github.com/OsgiliathEnterprise/ansible-containerization/workflows/Molecule/badge.svg)|[![Build Status](https://app.travis-ci.com/OsgiliathEnterprise/ansible-containerization.svg?branch=master)](https://app.travis-ci.com/github/OsgiliathEnterprise/ansible-containerization)|[![Ansible Galaxy](https://img.shields.io/badge/galaxy-tcharl.ansible_containerization-660198.svg?style=flat)](https://galaxy.ansible.com/tcharl/ansible_containerization)| [![GA](https://img.shields.io/badge/GA-released-green)]()                       |
| [Routing](https://github.com/OsgiliathEnterprise/ansible-routing)                       |![Molecule](https://github.com/OsgiliathEnterprise/ansible-routing/workflows/Molecule/badge.svg)|[![Build Status](https://app.travis-ci.com/OsgiliathEnterprise/ansible-routing.svg?branch=master)](https://app.travis-ci.com/github/OsgiliathEnterprise/ansible-routing)|[![Ansible Galaxy](https://img.shields.io/badge/galaxy-tcharl.ansible_routing-660198.svg?style=flat)](https://galaxy.ansible.com/tcharl/ansible_routing)| [![GA](https://img.shields.io/badge/GA-released-green)]()                       |
| [SecureHost](https://github.com/OsgiliathEnterprise/ansible-securehost)                 |![Molecule](https://github.com/OsgiliathEnterprise/ansible-securehost/workflows/Molecule/badge.svg)|[![Build Status](https://app.travis-ci.com/OsgiliathEnterprise/ansible-securehost.svg?branch=master)](https://app.travis-ci.com/github/OsgiliathEnterprise/ansible-securehost)|[![Ansible Galaxy](https://img.shields.io/badge/galaxy-tcharl.ansible_securehost-660198.svg?style=flat)](https://galaxy.ansible.com/tcharl/ansible_securehost)| [![GA](https://img.shields.io/badge/GA-released-green)]()                       |
| [Users](https://github.com/OsgiliathEnterprise/ansible-users)                           |![Molecule](https://github.com/OsgiliathEnterprise/ansible-users/workflows/Molecule/badge.svg)|![Molecule](https://github.com/OsgiliathEnterprise/ansible-users/workflows/Molecule/badge.svg)|[![Ansible Galaxy](https://img.shields.io/badge/galaxy-tcharl.ansible_users-660198.svg?style=flat)](https://galaxy.ansible.com/tcharl/ansible_users)| [![GA](https://img.shields.io/badge/GA-released-green)]()                       |
| [Virtualization](https://github.com/OsgiliathEnterprise/ansible-virtualization)         |![Molecule](https://github.com/OsgiliathEnterprise/ansible-virtualization/workflows/Molecule/badge.svg)|[![Build Status](https://app.travis-ci.com/OsgiliathEnterprise/ansible-virtualization.svg?branch=master)](https://app.travis-ci.com/github/OsgiliathEnterprise/ansible-virtualization)|[![Ansible Galaxy](https://img.shields.io/badge/galaxy-tcharl.ansible_virtualization-660198.svg?style=flat)](https://galaxy.ansible.com/tcharl/ansible_virtualization)| [![GA](https://img.shields.io/badge/GA-released-green)]()                       |
| [Virt-guest](https://github.com/OsgiliathEnterprise/ansible-virtualization-guest)       |![Molecule](https://github.com/OsgiliathEnterprise/ansible-virtualization-guest/workflows/Molecule/badge.svg)|[![Build Status](https://app.travis-ci.com/OsgiliathEnterprise/ansible-virtualization-guest.svg?branch=master)](https://app.travis-ci.com/github/OsgiliathEnterprise/ansible-virtualization-guest)|[![Ansible Galaxy](https://img.shields.io/badge/galaxy-tcharl.ansible_virtualization_guest-660198.svg?style=flat)](https://galaxy.ansible.com/tcharl/ansible_virtualization_guest)| [![GA](https://img.shields.io/badge/GA-released-green)]()                       |
| [Volumes](https://github.com/OsgiliathEnterprise/ansible-volumes)                       |![Molecule](https://github.com/OsgiliathEnterprise/ansible-volumes/workflows/Molecule/badge.svg)|[![Build Status](https://app.travis-ci.com/OsgiliathEnterprise/ansible-volumes.svg?branch=master)](https://app.travis-ci.com/github/OsgiliathEnterprise/ansible-volumes)|[![Ansible Galaxy](https://img.shields.io/badge/galaxy-tcharl.ansible_volumes-660198.svg?style=flat)](https://galaxy.ansible.com/tcharl/ansible_volumes)| [![GA](https://img.shields.io/badge/GA-released-green)]()                       |
| [Nameserver](https://github.com/OsgiliathEnterprise/ansible-nameserver)                 |![Molecule](https://github.com/OsgiliathEnterprise/ansible-nameserver/workflows/Molecule/badge.svg)|[![Build Status](https://app.travis-ci.com/OsgiliathEnterprise/ansible-nameserver.svg?branch=master)](https://app.travis-ci.com/github/OsgiliathEnterprise/ansible-nameserver)|[![Ansible Galaxy](https://img.shields.io/badge/galaxy-tcharl.ansible_nameserver-660198.svg?style=flat)](https://galaxy.ansible.com/tcharl/ansible_nameserver)| [![GA](https://img.shields.io/badge/GA-released-green)]()                       |
| [Orchestration](https://github.com/OsgiliathEnterprise/ansible-orchestration)           |![Molecule](https://github.com/OsgiliathEnterprise/ansible-orchestration/workflows/Molecule/badge.svg)|[![Build Status](https://app.travis-ci.com/OsgiliathEnterprise/ansible-orchestration.svg?branch=master)](https://app.travis-ci.com/github/OsgiliathEnterprise/ansible-orchestration)|[![Ansible Galaxy](https://img.shields.io/badge/galaxy-tcharl.ansible_orchestration-660198.svg?style=flat)](https://galaxy.ansible.com/tcharl/ansible_orchestration)| [![GA](https://img.shields.io/badge/GA-released-green)]()                       |
| [Orchestration Cli](https://github.com/OsgiliathEnterprise/ansible-orchestration-cli)   |![Molecule](https://github.com/OsgiliathEnterprise/ansible-orchestration-cli/workflows/Molecule/badge.svg)|[![Build Status](https://app.travis-ci.com/OsgiliathEnterprise/ansible-orchestration-cli.svg?branch=master)](https://app.travis-ci.com/github/OsgiliathEnterprise/ansible-orchestration-cli)|[![Ansible Galaxy](https://img.shields.io/badge/galaxy-tcharl.ansible_orchestration_cli-660198.svg?style=flat)](https://galaxy.ansible.com/tcharl/ansible_orchestration_cli)| [![GA](https://img.shields.io/badge/GA-released-green)]()                       |
| [Kube Cert Manager](https://github.com/OsgiliathEnterprise/kube_certmanager)            |![Molecule](https://github.com/OsgiliathEnterprise/kube_certmanager/workflows/Molecule/badge.svg)|[![Build Status](https://app.travis-ci.com/OsgiliathEnterprise/kube_certmanager.svg?branch=master)](https://app.travis-ci.com/github/OsgiliathEnterprise/kube_certmanager)|[![Ansible Galaxy](https://img.shields.io/badge/galaxy-tcharl.kube_certmanager-660198.svg?style=flat)](https://galaxy.ansible.com/tcharl/kube_certmanager)| [![GA](https://img.shields.io/badge/GA-released-green)]()                       |
| [Container registry](https://github.com/OsgiliathEnterprise/ansible-container-registry) |![Molecule](https://github.com/OsgiliathEnterprise/ansible-container-registry/workflows/Molecule/badge.svg)|[![Build Status](https://app.travis-ci.com/OsgiliathEnterprise/ansible-container-registry.svg?branch=master)](https://app.travis-ci.com/github/OsgiliathEnterprise/ansible-container-registry)|[![Ansible Galaxy](https://img.shields.io/badge/galaxy-tcharl.ansible_container_registry-660198.svg?style=flat)](https://galaxy.ansible.com/tcharl/ansible_container_registry)| [![In Progress](https://img.shields.io/badge/InProgress-not_released-orange)]() |
| [NFS Client](https://github.com/OsgiliathEnterprise/nfs_client)                         |![Molecule](https://github.com/OsgiliathEnterprise/nfs_client/workflows/Molecule/badge.svg)|[![Build Status](https://app.travis-ci.com/OsgiliathEnterprise/nfs_client.svg?branch=master)](https://app.travis-ci.com/github/OsgiliathEnterprise/nfs_client)|[![Ansible Galaxy](https://img.shields.io/badge/galaxy-tcharl.nfs_client-660198.svg?style=flat)](https://galaxy.ansible.com/tcharl/nfs_client)| [![GA](https://img.shields.io/badge/GA-released-green)]()                       |
| [NFS Server](https://github.com/OsgiliathEnterprise/nfs_server)                         |![Molecule](https://github.com/OsgiliathEnterprise/nfs_server/workflows/Molecule/badge.svg)|[![Build Status](https://app.travis-ci.com/OsgiliathEnterprise/nfs_server.svg?branch=master)](https://app.travis-ci.com/github/OsgiliathEnterprise/nfs_server)|[![Ansible Galaxy](https://img.shields.io/badge/galaxy-tcharl.nfs_server-660198.svg?style=flat)](https://galaxy.ansible.com/tcharl/nfs_server)| [![GA](https://img.shields.io/badge/GA-released-green)]()                       |
| [Reverse Proxy](https://github.com/OsgiliathEnterprise/reverse_proxy)                   |![Molecule](https://github.com/OsgiliathEnterprise/reverse_proxy/workflows/Molecule/badge.svg)|[![Build Status](https://app.travis-ci.com/OsgiliathEnterprise/reverse_proxy.svg?branch=master)](https://app.travis-ci.com/github/OsgiliathEnterprise/reverse_proxy)|[![Ansible Galaxy](https://img.shields.io/badge/galaxy-tcharl.reverse_proxy-660198.svg?style=flat)](https://galaxy.ansible.com/tcharl/reverse_proxy)|[![In Progress](https://img.shields.io/badge/GA-released-green)]()|
| [LocalUser](https://github.com/OsgiliathEnterprise/ansible-localuser)                   |![Molecule](https://github.com/OsgiliathEnterprise/ansible-localuser/workflows/Molecule/badge.svg)|![Molecule](https://github.com/OsgiliathEnterprise/ansible-localuser/workflows/Molecule/badge.svg)|[![Ansible Galaxy](https://img.shields.io/badge/galaxy-tcharl.ansible-localuser-660198.svg?style=flat)](https://galaxy.ansible.com/tcharl/ansible_localuser)|[![In Progress](https://img.shields.io/badge/GA-released-green)]()|
| [Bind9](https://github.com/OsgiliathEnterprise/bind9)                                   |![Molecule](https://github.com/OsgiliathEnterprise/bind9/workflows/Molecule/badge.svg)|[![Build Status](https://app.travis-ci.com/OsgiliathEnterprise/bind9.svg?branch=master)](https://app.travis-ci.com/github/OsgiliathEnterprise/bind9)|[![Ansible Galaxy](https://img.shields.io/badge/galaxy-tcharl.bind9-660198.svg?style=flat)](https://galaxy.ansible.com/tcharl/bind9)|[![In Progress](https://img.shields.io/badge/GA-released-green)]()|
| [/etc/host append](https://github.com/OsgiliathEnterprise/etchost_append)               |![Molecule](https://github.com/OsgiliathEnterprise/etchost_append/workflows/Molecule/badge.svg)|[![Build Status](https://app.travis-ci.com/OsgiliathEnterprise/etchost_append.svg?branch=master)](https://app.travis-ci.com/github/OsgiliathEnterprise/etchost_append)|[![Ansible Galaxy](https://img.shields.io/badge/galaxy-tcharl.etchost_append-660198.svg?style=flat)](https://galaxy.ansible.com/tcharl/etchost_append)|[![In Progress](https://img.shields.io/badge/GA-released-green)]()|
| [Orchestration_csi](https://github.com/OsgiliathEnterprise/orchestration_csi)           |[![Molecule](https://github.com/OsgiliathEnterprise/orchestration_csi/actions/workflows/molecule.yml/badge.svg)](https://github.com/OsgiliathEnterprise/orchestration_csi/actions/workflows/molecule.yml)|[![Build Status](https://app.travis-ci.com/OsgiliathEnterprise/orchestration_csi.svg?branch=master)](https://app.travis-ci.com/github/OsgiliathEnterprise/orchestration_csi)|[![Ansible Galaxy](https://img.shields.io/badge/galaxy-tcharl.orchestration_csi-660198.svg?style=flat)](https://galaxy.ansible.com/tcharl/orchestration_csi)|[![In Progress](https://img.shields.io/badge/GA-released-green)]()|
| [Service Mesh](https://github.com/OsgiliathEnterprise/servicemesh)                      |[![Molecule](https://github.com/OsgiliathEnterprise/servicemesh/actions/workflows/molecule.yml/badge.svg)](https://github.com/OsgiliathEnterprise/servicemesh/actions/workflows/molecule.yml)|[![Build Status](https://app.travis-ci.com/OsgiliathEnterprise/servicemesh.svg?branch=master)](https://app.travis-ci.com/github/OsgiliathEnterprise/servicemesh)|[![Ansible Galaxy](https://img.shields.io/badge/galaxy-tcharl.servicemesh-660198.svg?style=flat)](https://galaxy.ansible.com/tcharl/servicemesh)|[![In Progress](https://img.shields.io/badge/GA-released-green)]()|
| [Cert manager](https://github.com/OsgiliathEnterprise/kube_certmanager)                      |[![Molecule](https://github.com/OsgiliathEnterprise/kube_certmanager/actions/workflows/molecule.yml/badge.svg)](https://github.com/OsgiliathEnterprise/kube_certmanager/actions/workflows/molecule.yml)|[![Build Status](https://app.travis-ci.com/OsgiliathEnterprise/kube_certmanager.svg?branch=master)](https://app.travis-ci.com/github/OsgiliathEnterprise/kube_certmanager)|[![Ansible Galaxy](https://img.shields.io/badge/galaxy-tcharl.kube_certmanager-660198.svg?style=flat)](https://galaxy.ansible.com/tcharl/kube_certmanager)|[![In Progress](https://img.shields.io/badge/GA-released-green)]()|

NOTE | Don't worry that much about build status: CI on 3 VMs and public, free-of-chagre CI providers are frequently leading to timeouts...

[![Join the chat at https://gitter.im/OsgiliathEnterprise/platform](https://badges.gitter.im/OsgiliathEnterprise/platform.svg)](https://gitter.im/OsgiliathEnterprise/platform?utm_source=badge&utm_medium=badge&utm_campaign=pr-badge&utm_content=badge)

 # What is it?
 
 Is it a bunch of infrastructure scripts (Packer, Ansible, Terraform, Dockerfiles, Kubernetes Helm Charts) that will ease the setup of a full OSS integrated Information System (including people management, mails, HR, ERP, EMD, Engineering, ...) targeting on premise (also includes a private cloud).

As of now, it focuses on setting up a fully secured production platform (with kubernetes) that can scale from 1 to inifinite.
Technically speaking, the stack is dealing with the following technologies:
 * LVM
 * Libvirt and KVM (VMs)
 * Other low level security & host stack: Firewalld, Fail2ban, /etc/hosts, ...
 * FreeIPA (including Kerberos, PKI, internal DNS, company LDAP)
 * Kerberized NFS
 * Nginx-proxy & letencrypt (frontend proxy)
 * Kubernetes (including certmanager and Istio service mesh)
 * Want a new business relative integration ? Feel free to [propose a new category](https://github.com/OsgiliathEnterprise/platform/issues/new?labels=Status%3A+Untriaged&template=CATEGORY_TEMPLATE.md)
 * Want to propose a new solution answering to a business need? [Tell us your recommendation](https://github.com/OsgiliathEnterprise/platform/issues/new?labels=Status%3A+Untriaged&template=SOLUTION_TEMPLATE.md)
 
 Solution proposal are submitted by the community and chosed democratically via votes on tickets, then integrated in the platform.
 The platform delivery goal is to provide a one (or just a little bit more) click solution to deploy the overall integrated stack for your company.
 
# Documentation
 
 Checkout the [reference documentation](https://osgiliathenterprise.github.io/platform/reference/toc.html) for more information.

# Status
 
This project is looking for active contributors and committers, feel free [to join us and produce anything you'll find useful](https://github.com/OsgiliathEnterprise/platform/blob/master/CONTRIBUTING.md)

# Running

At the end of the day, you'll configure your [provision (VM creation)](./ansible/inventories/provision-vms) and [configuration (middlewares)](./ansible/inventories/configure-vms) inventories, then run the three commands above to get your production platform up and running!

```
sh git-clone # will disappear ASAP
./configure

ansible-galaxy install -r <path to the highest level role>/requirements-stansalone.yml -p ./roles

 ansible-playbook -i inventories/provision-vms osgiliath-provision.yml -vv --vault-password-file .vault_pass.txt --ask-become-pass

 ansible-playbook -i inventories/configure-vms osgiliath-configure.yml -vv --vault-password-file .vault_pass.txt --ask-become-pass
```
